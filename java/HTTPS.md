# HTTPS

## 1.1、概述

HTTP在传输数据时，所有传输的内容都是明文，无法保证数据的安全性。（账号、密码、个人信息等隐私）

定义：在HTTP之下增加的一个安全层，用于保障HTTP的加密传输。

本质：在客户端和服务器之间用非对称加密协商出一套对称秘钥，每次发送信息之前将内容加密，收到之后解密，达到内容的加密传输。

## 1.2、SSL与TLS

TLS其实就是SSL的升级版

| 时间   | 事件                                                   |
| ------ | ------------------------------------------------------ |
| 1994年 | NetScape公司设计了SSL 1.0                              |
| 1995年 | SSL 2.0                                                |
| 1996年 | SSL 3.0                                                |
| 1999年 | 互联网标准化组织ISOC接替NetScape，发布SSL升级版TLS 1.0 |
| 2006年 | TLS 1.1                                                |
| 2008年 | TLS 1.2                                                |
| 2018年 | TLS 1.3                                                |

## 1.3、 端口

以一个浏览器访问一个web地址为例子

http 打开一个网址默认后面是80端口

https 打开一个网址不但要打开80端口，还有打开443端口



## 1.4、 SSL 握手

SSL 握手的过程是明文，因此SSL握手的重点在于怎么在不安全的网络中安全的进行秘钥交换

| 时间                     | 描述       |
| ------------------------ | ---------- |
| 建立握手，确认秘钥的时候 | 非对称加密 |
| 传输数据的时候           | 对称加密   |

RSA算法交换秘钥步骤

1. 客户端给出协议版本号、一个随机数（==Random1==），以及客户端支持的加密方法。
2. 服务端确认使用的加密方法，并给出数字证书、以及随机数（==Random2==）
3. 客户端确认数字证书有效、生成一个新的随机数（==premaster secret==），并使用数字证书中的公钥，利用RSA算法加密这个随机数，发给服务端。
4. 服务端使用自己的私钥，获取客户端发来的随机数（==premaster secret==）。
5. 客户端和服务端根据约定的加密方法，使用前面的三个随机数，生成对话秘钥（==master secret==），用来加密接下来的整个回话过程。

整个通话的安全，只取决第三个随机数（==premaster secret==）能不能被破解。有没有更安全的方式

DH算法：==premaster secret== 不需要传递，双方只要交互各自的参数，就可以算出这个随机数。

